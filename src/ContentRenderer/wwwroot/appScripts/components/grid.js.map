{"version":3,"sources":["components/grid.ts"],"names":[],"mappings":"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","file":"components/grid.js","sourcesContent":["import {Component, Input, OnInit, trigger, transition, animate, OnDestroy} from '@angular/core';\r\nimport {GridConfiguration} from '../models/gridConfiguration';\r\nimport { Subscription } from 'rxjs';\r\nimport {Observable} from 'rxjs/Rx';\r\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\nimport { PropertyMeta } from '../models/propertyMeta';\r\n\r\n@Component({\r\n    selector: 'grid-ui',\r\n    templateUrl: '../../views/gridView.html',\r\n    host: {\r\n        '[@routeAnimation]': \"true\"\r\n    },\r\n    animations: [\r\n        trigger('routeAnimation', [\r\n            transition('* => void', animate('100ms ease-in')),\r\n            transition('void => *', animate('100ms ease-out'))  // For next page\r\n        ])\r\n    ]\r\n})\r\n\r\nexport class GridElement implements OnInit, OnDestroy {\r\n    @Input()\r\n    config: GridConfiguration;\r\n    @Input()\r\n    dataSource: BehaviorSubject<Array<Object>>;\r\n    private subscription: Subscription;\r\n    data: Object[];\r\n    visibleItems: Object[];\r\n    metaColumns: { [key: string]: PropertyMeta } = {}\r\n    sortBy: string;\r\n    reverse: boolean;\r\n\r\n    ngOnInit() {\r\n        if (!this.config || !this.config.meta) {\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < this.config.meta.length; i += 1) {\r\n            if (!this.config.meta[i]) {\r\n                continue;\r\n            }\r\n\r\n            this.metaColumns[this.config.meta[i].name] = this.config.meta[i];\r\n        }\r\n        if (this.dataSource) {\r\n            this.subscription = this.dataSource.subscribe((collection: Object[]) => {\r\n                this.data = collection;\r\n                this.setOrder(this.sortBy, true);\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.subscription.unsubscribe();\r\n    }\r\n\r\n    private sortData() {\r\n        this.data.sort((a: Object, b: Object) => {\r\n            var aVal, bVal;\r\n            aVal = a === null || a === void (0) ? void (0) : a[this.sortBy];\r\n            bVal = b === null || b === void (0) ? void (0) : b[this.sortBy];\r\n\r\n            if (this.reverse) {\r\n                return aVal > bVal ? -1 : (aVal < bVal ? 1 : 0);\r\n            }\r\n            else {\r\n                return aVal > bVal ? 1 : (aVal < bVal ? -1 : 0);\r\n            }\r\n        });\r\n        this.visibleItems = this.data;\r\n    }\r\n\r\n    setOrder(key: string, forced?: boolean) {\r\n        if (!key) {\r\n            this.visibleItems = this.data;\r\n            return;\r\n        }\r\n\r\n        if (!forced) {\r\n            this.reverse = !forced && this.sortBy === key && !this.reverse;\r\n        }\r\n\r\n        if (!this.reverse) {\r\n            this.sortBy = key;\r\n        }\r\n\r\n        this.sortData();\r\n    }\r\n}\r\n/*test*/"],"sourceRoot":"/source/"}