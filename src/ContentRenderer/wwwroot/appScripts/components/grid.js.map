{"version":3,"sources":["components/grid.ts"],"names":[],"mappings":"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","file":"components/grid.js","sourcesContent":["import {Component, Input, OnInit, trigger, transition, animate, OnDestroy} from '@angular/core';\r\nimport {GridConfiguration} from '../models/gridConfiguration';\r\nimport { Subscription } from 'rxjs';\r\nimport {Observable} from 'rxjs/Rx';\r\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\nimport { PropertyMeta } from '../models/propertyMeta';\r\n\r\n@Component({\r\n    selector: 'grid-ui',\r\n    templateUrl: '../../views/gridView.html',\r\n    host: {\r\n        '[@routeAnimation]': \"true\"\r\n    },\r\n    animations: [\r\n        trigger('routeAnimation', [\r\n            transition('* => void', animate('100ms ease-in')),\r\n            transition('void => *', animate('100ms ease-out'))  // For next page\r\n        ])\r\n    ]\r\n})\r\n\r\nexport class GridElement implements OnInit, OnDestroy {\r\n    @Input()\r\n    config: GridConfiguration;\r\n    @Input()\r\n    dataSource: BehaviorSubject<Array<Object>>;\r\n    private subscription: Subscription;\r\n    data: Object[];\r\n    visibleItems: Object[];\r\n    metaColumns: { [key: string]: PropertyMeta } = {}\r\n    sortBy: string;\r\n    reverse: boolean;\r\n    itemsPerPage: number = 15;\r\n\r\n    ngOnInit() {\r\n        if (!this.config || !this.config.meta) {\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < this.config.meta.length; i += 1) {\r\n            if (!this.config.meta[i]) {\r\n                continue;\r\n            }\r\n\r\n            this.metaColumns[this.config.meta[i].name] = this.config.meta[i];\r\n        }\r\n        if (this.dataSource) {\r\n            this.subscription = this.dataSource.subscribe((collection: Object[]) => {\r\n                this.data = collection;\r\n                this.setOrder(this.sortBy, true);\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.subscription.unsubscribe();\r\n    }\r\n\r\n    private sortData() {\r\n        this.data.sort((a: Object, b: Object) => {\r\n            var aVal, bVal;\r\n            aVal = a === null || a === void (0) ? void (0) : a[this.sortBy];\r\n            bVal = b === null || b === void (0) ? void (0) : b[this.sortBy];\r\n\r\n            if (this.reverse) {\r\n                return aVal > bVal ? -1 : (aVal < bVal ? 1 : 0);\r\n            }\r\n            else {\r\n                return aVal > bVal ? 1 : (aVal < bVal ? -1 : 0);\r\n            }\r\n        });\r\n        this.visibleItems = this.data;\r\n    }\r\n\r\n    setOrder(key: string, forced?: boolean) {\r\n        if (!key) {\r\n            this.visibleItems = this.data;\r\n            return;\r\n        }\r\n\r\n        if (!forced) {\r\n            this.reverse = !forced && this.sortBy === key && !this.reverse;\r\n        }\r\n\r\n        if (!this.reverse) {\r\n            this.sortBy = key;\r\n        }\r\n\r\n        this.sortData();\r\n    }\r\n}\r\n/*test*/"],"sourceRoot":"/source/"}