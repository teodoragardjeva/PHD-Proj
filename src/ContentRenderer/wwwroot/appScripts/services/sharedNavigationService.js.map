{"version":3,"sources":["../../scripts/services/sharedNavigationService.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,wCAAyC;AACzC,6CAAwC;AAGxC,0DAAqD;AACrD,gDAA2C;AAK3C,IAAa,uBAAuB,GAApC;IAMI,YAAoB,WAAuB;QAAvB,gBAAW,GAAX,WAAW,CAAY;QALpC,SAAI,GAAyC,IAAI,iCAAe,CAAC,IAAI,KAAK,EAAgB,CAAC,CAAC;QAM/F,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,CAAC,MAAW;YAC7C,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACV,MAAM,GAAG,EAAE,CAAC;YAChB,CAAC;YAED,IAAI,CAAC,YAAY,GAAG,iBAAO,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;YAEtD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACvB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,oBAAoB,CAAC,EAAU;QAClC,IAAI,GAAG,GAAqB,EAAE,CAAC;QAC/B,IAAI,IAAkB,CAAC;QAEvB,OAAO,EAAE,GAAG,CAAC,EAAE,CAAC;YACZ,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;YAE7B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACR,MAAM,CAAC;YACX,CAAC;YAED,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;YAC7C,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC;QACvB,CAAC;QAED,GAAG,CAAC,OAAO,EAAE,CAAC;QAEd,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;IACjC,CAAC;IAEM,OAAO,CAAC,EAAU;QACrB,MAAM,CAAC,CAAC,EAAE,IAAI,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;IAC3G,CAAC;CACJ,CAAA;AA1CY,uBAAuB;IADnC,iBAAU,EAAE;qCAOwB,uBAAU;GANlC,uBAAuB,CA0CnC;AA1CY,0DAAuB","file":"sharedNavigationService.js","sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {WebService} from './webService';\r\nimport {MenuListItem} from '../models/menuListItem';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport {BehaviorSubject} from 'rxjs/BehaviorSubject';\r\nimport {Helpers} from '../helpers/helpers';\r\nimport {NavigationItem } from '../models/navigationItem';\r\n\r\n\r\n@Injectable()\r\nexport class SharedNavigationService {\r\n    public data: BehaviorSubject<Array<MenuListItem>> = new BehaviorSubject(new Array<MenuListItem>());\r\n    public selectedMenuItem: MenuListItem;\r\n    private kvpMenuItems: { [id: number]: MenuListItem }\r\n    public navigationHistory: NavigationItem[];\r\n\r\n    constructor(private _webService: WebService) {\r\n        this._webService.getMenuItems().then((result: any) => {\r\n            if (!result) {\r\n                result = [];\r\n            }\r\n\r\n            this.kvpMenuItems = Helpers.getNavigationTree(result);\r\n\r\n            this.data.next(result);\r\n            this.data.complete();\r\n        });\r\n    }\r\n\r\n    public selectNavigationMenu(id: number) {\r\n        let arr: NavigationItem[] = [];\r\n        let item: MenuListItem;\r\n\r\n        while (id > 0) {\r\n            item = this.kvpMenuItems[id];\r\n\r\n            if (!item) {\r\n                return;\r\n            }\r\n\r\n            arr.push({ id: item.id, title: item.title });\r\n            id = item.parentId;\r\n        }\r\n\r\n        arr.reverse();\r\n\r\n        this.navigationHistory = arr;\r\n    }\r\n\r\n    public getItem(id: number): MenuListItem {\r\n        return !id || isNaN(id) || !this.kvpMenuItems || !this.kvpMenuItems[id] ? null : this.kvpMenuItems[id];\r\n    }\r\n}"]}